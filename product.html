<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>茶韻花語商品列表</title>
    <link rel="stylesheet" href="./css/header.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kaisei+Opti&family=Noto+Serif+TC&display=swap');

        /* styles.css */
        body {
            font-family: "Noto Serif TC", serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #302427;
        }

        .cart {
            font-size: 16px;
            cursor: pointer;
        }

        main {
            padding: 20px;
            margin-top: 100px;
        }


        .filters {
            margin-bottom: 20px;
        }

        .filters select {
            padding: 10px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .product-list {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }

        @media screen and (min-width: 375px) and (max-width: 430px) {
            .product-list {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 20px;
            }
        }

        @media screen and (min-width: 768px) and (max-width: 1366px) {
            .product-list {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 20px;
            }
        }

        .product {
            /* background-color: white; */
            padding: 20px;
            /* border: 1px solid #ddd; */
            border-radius: 5px;
            /* box-shadow: 0 0 10px rgba(0, 0, 0, 0.1); */
        }

        .product img {
            max-width: 100%;
            height: auto;
            width: 300px;
            height: 300px;
            border-radius: 10px;
        }

        .product h2 a {
            font-size: 18px;
            margin: 10px 0;
            text-decoration: none;
            color: #302427;
        }

        .product .tag {
            color: #302427;
            font-size: 15px;
            width: 100px;
            height: 30px;
            background-color: #D7A5B1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 99px;
        }

        .product .price {
            color: #302427;

            font-size: 20px;
        }


        .product .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 16px;
        }

        .product .stock {
            margin: 10px 0;
            font-size: 14px;
        }

        .product .rating {
            color: #BC8383;
            font-size: 16px;
        }

        .product .actions {
            margin-top: 10px;
            display: flex;
            align-items: center;
        }

        .product .actions button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 5px;
        }

        .product .add-to-cart {
            background-color: #ffffff;
            border: 1px solid #302427;
            color: #302427;
            border-radius: 99px;
            height: 40px;
            width: 100px;
        }

        .product .add-to-cart:hover {
            background-color: #684647;
            border: 1px solid #684647;
            color: #ffffff;
            border-radius: 99px;
            height: 40px;
            width: 100px;
        }

        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -300px;
            width: 300px;
            height: 100%;
            background-color: white;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.5);
            transition: right 0.3s ease;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            z-index: 1000;
        }

        .cart-sidebar.open {
            right: 0;
        }

        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background-color: #ffffff;
            color: #302427;
        }

        .cart-header h2 {
            margin: 0;
        }

        #closeCart {
            color: #302427;
        }

        .cart-header button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .cart-content {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
        }

        .cart-content p {
            text-align: center;
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid #ddd;
        }

        .cart-footer .checkout {
            width: 100%;
            padding: 10px;
            background-color: #684647;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .continue-shopping {
            width: 100%;
            padding: 10px;
            background-color: #684647;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }

        .pri {
            /* 價格布局*/
            display: flex;
            align-items: center;
        }

        .cart {
            position: relative;
            cursor: pointer;
            margin-right: 50px;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart img {
            width: 30px;
            height: auto;
        }

        .cart-count {
            position: absolute;
            top: -5px;
            right: -15px;
            background: red;
            color: white;
            border-radius: 50%;
            padding: 5px;
            font-size: 12px;
            width: 15px;
            height: 15px;
        }


        @media screen and (max-width: 600px) {
            .product img {
                max-width: 100%;
                height: auto;
                width: 300px;
                height: 100px;
            }
        }
    </style>
</head>

<body>
    <div class="title">
        <h1>商品列表</h1>
    </div>

    <header>
        <div class="logo"><img src="./images/11.png" alt="Icon"></div>
        <div class="header-items">
            <div><a href="./product.html">商品列表</a></div>
            <div><a href="#">會員招募</a></div>
            <div><a href="./qa.html">常見Q&A</a></div>
            <div><a href="./news.html">最新消息</a></div>
        </div>
        <div class="cart" id="cartButton">
            <img src="./images/10.png" alt=""> (<span id="cartCount">0</span>)
        </div>
    </header>

    <main>
        <div class="filters">
            <h1>商品列表</h1>
            <select id="categoryFilter">
                <option value="">所有類别</option>
                <option value="stressrelief">舒緩壓力</option>
                <option value="beauty">美容養顏</option>
                <option value="promote">促進消化</option>
                <option value="poost">提升免疫力</option>
                <option value="sweet">甜香</option>
                <option value="light">淡雅</option>
                <option value="rich">濃郁</option>
                <option value="fresh">清新</option>
                <option value="smooth">甘醇</option>
                <option value="slightly">略帶苦澀</option>
            </select>
            <select id="sortOptions">
                <option value="default">默認排序</option>
                <option value="priceAsc">價格升序</option>
                <option value="priceDesc">價格降序</option>
                <option value="rating">評分最高</option>
            </select>
        </div>
        <div class="product-list" id="productList">
            <!-- 商品列表项将通过JavaScript插入 -->
        </div>
    </main>

    <!-- 滑出购物车 -->
    <div id="cartSidebar" class="cart-sidebar">
        <div class="cart-header">
            <h2>購物車</h2>
            <button id="closeCart">&times;</button>
        </div>
        <div id="cartContent" class="cart-content">
            <p>當前購物車無任何商品。</p>
            <button id="continueShopping" class="continue-shopping">前往購物</button>
        </div>
        <div class="cart-footer">
            <button id="checkout" class="checkout">前往结帳</button>
        </div>
    </div>

    <script>
        // scripts.js
        document.addEventListener('DOMContentLoaded', function () {
            const products = [
                {
                    id: 11,
                    tag: '美容養顏',
                    name: '桃花蜜桃茶',
                    category: 'smooth',
                    category: 'light',
                    price: 150,
                    originalPrice: 200,
                    stock: 0,
                    rating: 4.0,
                    imageUrl: './images/index/19.png',
                    hoverImage: "./images/index/21.png",
                    detailsPage: "product_page01.html"
                },
                {
                    id: 1,
                    tag: '美容養顏',
                    name: '玫瑰檸檬茶',
                    category: 'sweet',
                    price: 200,
                    originalPrice: 250,
                    stock: 10,
                    rating: 4.5,
                    imageUrl: './images/index/fruity02-1.jpg',
                    hoverImage: "./images/index/fruity02.jpg",
                    detailsPage: "product_page02.html"
                },
                {
                    id: 2,
                    tag: '美容養顏',
                    name: '茉莉花茶',
                    category: 'beauty',
                    category: 'light',
                    price: 150,
                    originalPrice: 200,
                    stock: 0,
                    rating: 4.0,
                    imageUrl: './images/index/08.png',
                    hoverImage: "./images/index/08-1.png",
                    detailsPage: "product_page03.html"
                },
                {
                    id: 3,
                    tag: '促進消化',
                    name: '洛神玫瑰茶',
                    category: 'sweet',
                    price: 150,
                    originalPrice: '',
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/floral03-1.png',
                    hoverImage: "./images/index/floral03.png",
                    detailsPage: "product_page04.html"
                },
                {
                    id: 4,
                    tag: '提升免疫力',
                    name: '百合花茶',
                    category: 'poost',
                    category: 'fresh',
                    price: 180,
                    originalPrice: 220,
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/13.png',
                    hoverImage: "./images/index/13-1.png",
                    detailsPage: "product_page05.html"
                },
                {
                    id: 5,
                    tag: '舒緩壓力',
                    name: '薰衣草茶',
                    category: 'stressrelief',
                    price: 180,
                    originalPrice: 220,
                    stock: 20,
                    rating: 4.0,
                    imageUrl: './images/index/09.png',
                    hoverImage: "./images/index/09-1.png",
                    detailsPage: "product_page06.html"
                },
                {
                    id: 6,
                    tag: '舒緩壓力',
                    name: '桂花枸杞茶',
                    category: 'stressrelief',
                    category: 'sweet',
                    price: 180,
                    originalPrice: 220,
                    stock: 20,
                    rating: 4.5,
                    imageUrl: './images/index/10.png',
                    hoverImage: "./images/index/10-1.png",
                    detailsPage: "product_page07.html"
                },
                {
                    id: 7,
                    tag: '舒緩壓力',
                    name: '洋甘菊茶',
                    category: 'stressrelief',
                    category: 'sweet',
                    price: 180,
                    originalPrice: 220,
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/11.png',
                    hoverImage: "./images/index/11-1.png",
                    detailsPage: "product_page08.html"
                },
                {
                    id: 8,
                    tag: '美容養顏',
                    name: '櫻花花茶',
                    category: 'beauty',
                    price: 180,
                    originalPrice: 220,
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/12.png',
                    hoverImage: "./images/index/12-1.png",
                    detailsPage: "product_page09.html"
                },
                {
                    id: 9,
                    tag: '促進消化',
                    name: '紫羅蘭花茶',
                    category: 'slightly',
                    price: 150,
                    originalPrice: '',
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/floral04.png',
                    hoverImage: "./images/index/floral04-1.png",
                    detailsPage: "product_page10.html"
                },
                {
                    id: 10,
                    tag: '促進消化',
                    name: '檸檬馬鞭草茶',
                    category: 'fresh',
                    category: 'promote',
                    price: 150,
                    originalPrice: '',
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/23.png',
                    hoverImage: "./images/index/23-1.png",
                    detailsPage: "product_page11.html"
                }
                ,
                {
                    id: 12,
                    tag: '增強免疫力',
                    name: '蝶豆花茶',
                    category: 'fresh',
                    price: 150,
                    originalPrice: '',
                    stock: 20,
                    rating: 4.8,
                    imageUrl: './images/index/22.png',
                    hoverImage: "./images/index/22-1.png",
                    detailsPage: "product_page11.html"
                }
            ];


            let cart = JSON.parse(localStorage.getItem('cart')) || [];

            const productList = document.getElementById('productList');
            const categoryFilter = document.getElementById('categoryFilter');
            const sortOptions = document.getElementById('sortOptions');
            const cartCount = document.getElementById('cartCount');
            const cartButton = document.getElementById('cartButton');
            const cartSidebar = document.getElementById('cartSidebar');
            const closeCart = document.getElementById('closeCart');
            const cartContent = document.getElementById('cartContent');
            const continueShopping = document.getElementById('continueShopping');
            const checkout = document.getElementById('checkout');

            function displayProducts(filteredProducts) {
                productList.innerHTML = '';
                filteredProducts.forEach(product => {
                    const productElement = document.createElement('div');
                    productElement.classList.add('product');
                    productElement.innerHTML = `
                <a href="${product.detailsPage}?id=${product.id}">
                    <img src="${product.imageUrl}" alt="${product.name}" 
                    onmouseover="this.src='${product.hoverImage}'" 
                    onmouseout="this.src='${product.imageUrl}'">
                </a>
                <div class="tag">${product.tag}</div>
                <h2><a href="${product.detailsPage}?id=${product.id}">${product.name}</a></h2>
                <div class="pri">
                <div class="price">${product.price}</div>
                <div class="original-price">${product.originalPrice}</div>
                </div>
                <div class="stock">${product.stock > 0 ? '尚有貨' : '缺貨'}</div>
                <div class="actions">
                    <div class="rating">评分: ${product.rating} ⭐</div>
                </div>
                <button class="add-to-cart" data-id="${product.id}">加入購物車</button>
            `;
                    productList.appendChild(productElement);
                });

                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', addToCart);
                });

                document.querySelectorAll('.buy-now').forEach(button => {
                    button.addEventListener('click', buyNow);
                });
            }

            function filterProducts() {
                const category = categoryFilter.value;
                let filteredProducts = products;

                if (category) {
                    filteredProducts = products.filter(product => product.category === category);
                }

                const sortOption = sortOptions.value;
                if (sortOption === 'priceAsc') {
                    filteredProducts.sort((a, b) => a.price - b.price);
                } else if (sortOption === 'priceDesc') {
                    filteredProducts.sort((a, b) => b.price - a.price);
                } else if (sortOption === 'rating') {
                    filteredProducts.sort((a, b) => b.rating - a.rating);
                }

                displayProducts(filteredProducts);
            }

            function addToCart(event) {
                const productId = parseInt(event.target.getAttribute('data-id'));
                const product = products.find(p => p.id === productId);
                const cartItem = cart.find(item => item.id === productId);

                if (cartItem) {
                    cartItem.quantity += 1;
                } else {
                    cart.push({ ...product, quantity: 1 });
                }

                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                alert('商品已加入購物車！');
                updateCartContent();
            }

            function buyNow(event) {
                const productId = parseInt(event.target.getAttribute('data-id'));
                alert(`購買商品ID: ${productId}`);
            }

            function updateCartCount() {
                cartCount.textContent = cart.reduce((total, item) => total + item.quantity, 0);
            }

            function updateCartContent() {
                if (cart.length === 0) {
                    cartContent.innerHTML = `
                <p>當前購物車無任何商品。</p>
                <button id="continueShopping" class="continue-shopping">前往購物</button>
            `;
                } else {
                    cartContent.innerHTML = '';
                    cart.forEach(item => {
                        const cartItem = document.createElement('div');
                        cartItem.classList.add('cart-item');
                        cartItem.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>價格: ${item.price}</p>
                    <p>數量: 
                        <button class="quantity-decrease" data-id="${item.id}">-</button>
                        <span>${item.quantity}</span>
                        <button class="quantity-increase" data-id="${item.id}">+</button>
                    </p>
                    <button class="remove-item" data-id="${item.id}">移除</button>
                `;
                        cartContent.appendChild(cartItem);
                    });

                    document.querySelectorAll('.quantity-increase').forEach(button => {
                        button.addEventListener('click', increaseQuantity);
                    });

                    document.querySelectorAll('.quantity-decrease').forEach(button => {
                        button.addEventListener('click', decreaseQuantity);
                    });

                    document.querySelectorAll('.remove-item').forEach(button => {
                        button.addEventListener('click', removeItem);
                    });
                }
            }

            function increaseQuantity(event) {
                const productId = parseInt(event.target.getAttribute('data-id'));
                const cartItem = cart.find(item => item.id === productId);

                if (cartItem) {
                    cartItem.quantity += 1;
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartCount();
                    updateCartContent();
                }
            }

            function decreaseQuantity(event) {
                const productId = parseInt(event.target.getAttribute('data-id'));
                const cartItem = cart.find(item => item.id === productId);

                if (cartItem && cartItem.quantity > 1) {
                    cartItem.quantity -= 1;
                    localStorage.setItem('cart', JSON.stringify(cart));
                    updateCartCount();
                    updateCartContent();
                }
            }

            function removeItem(event) {
                const productId = parseInt(event.target.getAttribute('data-id'));
                cart = cart.filter(item => item.id !== productId);

                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartCount();
                updateCartContent();
            }

            cartButton.addEventListener('click', () => {
                cartSidebar.classList.add('open');
                updateCartContent();
            });

            closeCart.addEventListener('click', () => {
                cartSidebar.classList.remove('open');
            });

            continueShopping.addEventListener('click', () => {
                cartSidebar.classList.remove('open');
            });

            checkout.addEventListener('click', () => {
                alert('前往结帳');
            });

            // 初始化显示所有商品
            displayProducts(products);
            updateCartCount();
            updateCartContent();

            categoryFilter.addEventListener('change', filterProducts);
            sortOptions.addEventListener('change', filterProducts);
        });

    </script>
</body>

</html>