<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>會員資料頁面</title>
    <link rel="stylesheet" href="./css/header.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f8f8f8;
            color: #333;
        }

        .cont {
            width: 90%;
            max-width: 1200px;
            margin: 100px auto;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .head nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }

        .head nav ul {
            display: flex;
            list-style-type: none;
        }

        .head nav ul li {
            margin-right: 20px;
        }

        .head nav ul li a {
            text-decoration: none;
            color: #333;
        }

        .head nav .logout {
            text-decoration: none;
            color: #333;
        }

        main {
            display: flex;
            justify-content: space-between;
            padding: 20px 0;
            flex-wrap: wrap;
            /* Allow wrapping */
        }

        .left-column {
            width: 45%;
        }

        .right-column {
            width: 45%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        section {
            margin-bottom: 20px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #fff;
        }

        section h2,
        section h3 {
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }

        .general-info p {
            margin-bottom: 10px;
        }

        .general-info .upgrade-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .general-info a {
            text-decoration: none;
            color: #f26522;
        }

        .member-info .form-group {
            margin-bottom: 15px;
        }

        form label {
            display: block;
            margin-bottom: 5px;
        }

        form input[type="text"],
        form input[type="email"],
        select {
            width: 100%;
            padding: 10px;
            margin-bottom: 5px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .phone-container {
            display: flex;
            gap: 10px;
        }

        .phone-container select,
        .phone-container input {
            flex: 1;
        }

        .dob-container {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .dob-container select {
            width: 32%;
        }

        .tooltip {
            font-size: 14px;
            color: #999;
            cursor: pointer;
        }

        form .set-password {
            display: inline-block;
            margin-top: 5px;
            text-decoration: none;
            color: #f26522;
        }

        form .verified {
            display: inline-block;
            margin-left: 10px;
            color: green;
            font-size: 14px;
        }

        .progress-bar-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .progress-bar {
            flex: 1;
            height: 20px;
            background-color: #ddd;
            border-radius: 10px;
            margin: 0 10px;
            overflow: hidden;
        }

        .progress-bar .progress {
            height: 100%;
            background-color: #f26522;
        }

        .actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            padding: 20px 0;
        }

        .actions .cancel {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #f0f0f0;
            color: #333;
            cursor: pointer;
        }

        .actions .save {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #f26522;
            color: #fff;
            cursor: pointer;
        }

        .empty-block {
            flex: 1;
            border: 1px dashed #ddd;
            border-radius: 5px;
        }

        @media screen and (max-width: 768px) {

            .left-column,
            .right-column {
                width: 100%;
                /* Let the columns take full width */
            }

            .left-column {
                margin-bottom: 20px;
                /* Add margin-bottom to create space between columns */
            }

            .right-column {
                margin-top: 20px;
                /* Add margin-top to create space between columns */
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="logo"><img src="./images/11.png" alt="Logo"></div>
        <img src="./images/menu-icon.png" alt="Menu" class="menu-icon" onclick="openLightboxMenu()">
        <div class="header-items">
            <a href="./product.html">商品列表</a>
            <a href="#">會員招募</a>
            <a href="./qa.html">常見Q&A</a>
            <a href="./news.html">最新消息</a>
        </div>
        <div class="cart">
            <img src="./images/10.png" alt="Cart Icon">
            <div class="cart-count">0</div>
        </div>
    </header>
    
    <div class="lightbox-menu" id="lightboxMenu">
        <div class="lightbox-menu-content">
            <span class="close-btnn" onclick="closeLightboxMenu()" style="top: 5px; right: 5px;">&times;</span>
            <a href="./product.html">商品列表</a>
            <a href="#">會員招募</a>
            <a href="./qa.html">常見Q&A</a>
            <a href="./news.html">最新消息</a>
        </div>
    </div>
    
    <script>
        function openLightboxMenu() {
            const lightboxMenu = document.getElementById('lightboxMenu');
            lightboxMenu.style.display = 'block';
        }
    
        function closeLightboxMenu() {
            const lightboxMenu = document.getElementById('lightboxMenu');
            lightboxMenu.style.display = 'none';
        }
    </script>

    <div class="cont">
        <div class="head">
            <nav>
                <ul>
                    <li><a href="./member01.html">個人資訊</a></li>
                    <li><a href="./member02.html">商店購物金</a></li>
                    <li><a href="./member03.html">優惠券</a></li>
                    <li><a href="./member04.html">訊息</a></li>
                    <li><a href="./member05.html">訂單</a></li>
                </ul>
                <a href="#" class="logout">登出</a>
            </nav>
        </div>

        <main>
            <div class="left-column">
                <section class="general-info">
                    <h2>一般會員</h2>
                    <p>升級至優良生活家，享購物 97 折 3 個月內累積消費金額達 NT$2500 即可升級</p>
                    <div class="upgrade-info">
                        <span>3 個月內累積消費金額 NT$0</span>
                        <span>差 NT$1500 升級</span>
                    </div>
                </section>

                <section class="member-info">
                    <h3>會員資料</h3>
                    <form>
                        <div class="form-group">
                            <label for="name">姓名</label>
                            <input type="email" id="name" value="陳飛">
                            <div class="error-message" style="display: none; color: red;">姓名必須為2到5個中文字</div>
                        </div>
                        <div class="form-group">
                            <label for="email">電郵</label>
                            <input type="email" id="email" value="sandy12291314@gmail.com">
                            <div class="error-message" style="display: none; color: red;">請輸入有效的電子郵件地址，不能包含中文字符</div>
                        </div>

                        <div class="form-group">
                            <label for="phone">手機號碼</label>
                            <div class="phone-container">
                                <input type="text" id="phone" value="976759688">
                                <div class="error-message" style="display: none; color: red;">請輸入以 09 開頭的 10 位數字</div>
                            </div>
                            <span class="verified">✔ 驗證完成</span>
                        </div>


                        <div class="form-group">
                            <label for="dob">生日日期 (選填)</label>
                            <div class="dob-container">
                                <select id="dob-year">
                                    <option value="">年</option>
                                    <option value="">1990</option>
                                    <option value="">1991</option>
                                    <option value="">1992</option>
                                    <option value="">1993</option>
                                    <option value="">1994</option>
                                    <option value="">1995</option>
                                    <option value="">1996</option>
                                    <option value="">1997</option>
                                    <option value="">1998</option>
                                </select>
                                <select id="dob-month">
                                    <option value="">月</option>
                                    <option value="">01</option>
                                    <option value="">02</option>
                                    <option value="">03</option>
                                    <option value="">04</option>
                                    <option value="">05</option>
                                    <option value="">06</option>
                                    <option value="">07</option>
                                    <option value="">08</option>
                                    <option value="">09</option>
                                    <option value="">10</option>
                                    <option value="">11</option>
                                    <option value="">12</option>
                                </select>
                                <select id="dob-day">
                                    <option value="">日</option>
                                    <option value="">01</option>
                                    <option value="">02</option>
                                    <option value="">03</option>
                                    <option value="">04</option>
                                    <option value="">05</option>
                                    <option value="">06</option>
                                    <option value="">07</option>
                                    <option value="">08</option>
                                    <option value="">09</option>
                                    <option value="">10</option>
                                    <option value="">11</option>
                                    <option value="">12</option>
                                    <option value="">13</option>
                                    <option value="">14</option>
                                    <option value="">15</option>
                                    <option value="">16</option>
                                    <option value="">17</option>
                                    <option value="">18</option>
                                    <option value="">19</option>
                                    <option value="">20</option>
                                    <option value="">21</option>
                                    <option value="">22</option>
                                    <option value="">23</option>
                                    <option value="">24</option>
                                    <option value="">25</option>
                                    <option value="">26</option>
                                    <option value="">27</option>
                                    <option value="">28</option>
                                    <option value="">29</option>
                                    <option value="">30</option>
                                    <option value="">31</option>
                                    <!-- Add day options -->
                                </select>
                                <span class="tooltip">?</span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="password">密碼</label>
                            <a href="#" class="set-password">設定新的密碼</a>
                        </div>
                    </form>
                </section>
            </div>

            <div class="right-column">
                <section class="upgrade-info">
                    <h3>3 個月內累積消費金額</h3>
                    <p>NT$0</p>
                    <div class="progress-bar-container">
                        <span>NT$150</span>
                        <div class="progress-bar">
                            <div class="progress" style="width: 10%;"></div>
                        </div>
                        <span>NT$1500</span>
                    </div>
                </section>

                <section class="empty-block">
                    <form>
                        <h2>送貨與付款資料</h2>
                        <div class="form-group">
                            <label for="contact-phone">聯絡電話 (選填)</label>
                            <div class="phone-container">
                                <input type="text" id="contact-phone" value="0912 345 678">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="address-form">
                                <label for="recipient">收件人</label>
                                <input type="text" id="recipient" placeholder="收件人">
                                <label for="recipient-phone">收件人電話號碼</label>
                                <div class="phone-container">
                                    <input type="text" id="recipient-phone" value="0912 345 678">
                                </div>
                                <label for="country">送貨地點</label>
                                <select id="country">
                                    <option value="台灣">台灣</option>
                                </select>
                                <label for="city">城市 / 縣</label>
                                <select id="city" onchange="updateDistricts()">
                                    <option value="">請選擇</option>
                                    <option value="台北市">台北市</option>
                                    <option value="基隆市">基隆市</option>
                                    <option value="新北市">新北市</option>
                                    <option value="宜蘭縣">宜蘭縣</option>
                                    <option value="新竹市">新竹市</option>
                                    <option value="新竹縣">新竹縣</option>
                                    <option value="桃園市">桃園市</option>
                                    <option value="苗栗縣">苗栗縣</option>
                                    <option value="台中市">台中市</option>
                                    <option value="彰化縣">彰化縣</option>
                                    <option value="南投縣">南投縣</option>
                                    <option value="桃園市">桃園市</option>
                                    <option value="桃園縣">桃園縣</option>
                                    <!-- 其他城市/縣 -->
                                </select>
                                <!-- 當前的地區選項 -->
                                <label for="district">地區</label>
                                <select id="district">
                                    <option value="">請選擇</option>
                                    <!-- 動態填充的地區選項 -->
                                </select>
                                <label for="address-detail">地址</label>
                                <input type="text" id="address-detail" placeholder="地址">
                            </div>
                        </div>
                    </form>
                </section>
            </div>
        </main>

        <div class="actions">
            <button class="cancel">取消</button>
            <button class="save">儲存</button>
        </div>
    </div>

    <script>
        const districts = {
            "台北市": ["中正區", "大同區", "中山區", "松山區", "大安區", "萬華區", "信義區", "士林區", "北投區", "內湖區", "南港區", "文山區"],
            "基隆市": ["仁愛區", "信義區", "中正區", "中山區", "安樂區", "暖暖區", "七堵區"],
            "新北市": ["板橋區", "三重區", "中和區", "永和區", "新莊區", "新店區", "樹林區", "鶯歌區", "三峽區", "淡水區", "瑞芳區", "土城區"],
            "宜蘭縣": ["宜蘭市", "頭城鎮", "羅東鎮", "蘇澳鎮", "員山鄉", "壯圍鄉", "礁溪鄉", "大同鄉", "五結鄉", "冬山鄉", "三星鄉", "南澳鄉", "釣魚台列嶼"],
            "新竹市": ["東區", "北區", "香山區"],
            "新竹縣": ["竹北市", "竹東鎮", "新埔鎮", "關西鎮", "湖口鄉", "新豐鄉", "芎林鄉", "橫山鄉", "北埔鄉", "寶山鄉", "峨眉鄉", "尖石鄉", "五峰鄉"],
            "桃園市": ["中壢區", "平鎮區", "龍潭區", "楊梅區", "新屋區", "觀音區", "桃園區", "龜山區", "八德區", "大溪區", "復興區", "大園區", "蘆竹區"],
            "苗栗縣": ["苗栗市", "苑裡鎮", "通霄鎮", "竹南鎮", "頭份市", "後龍鎮", "卓蘭鎮", "大湖鄉", "公館鄉", "銅鑼鄉", "南庄鄉", "頭屋鄉", "三義鄉"],
            "台中市": ["中區", "東區", "南區", "西區", "北區", "北屯區", "西屯區", "南屯區", "太平區", "大里區", "霧峰區", "烏日區", "豐原區", "后里區"],
            "彰化縣": ["彰化市", "鹿港鎮", "和美鎮", "線西鄉", "伸港鄉", "福興鄉", "秀水鄉", "花壇鄉", "芬園鄉", "員林市"],
            "南投縣": ["南投市", "埔里鎮", "草屯鎮", "竹山鎮", "集集鎮", "名間鄉", "鹿谷鄉", "中寮鄉", "魚池鄉", "國姓鄉", "水里鄉", "信義鄉", "仁愛鄉"],
            "桃園市": ["中壢區", "平鎮區", "龍潭區", "楊梅區", "新屋區", "觀音區", "桃園區", "龜山區", "八德區", "大溪區", "復興區", "大園區", "蘆竹區"],
            // Add other cities/counties and their districts
        };

        document.getElementById('city').addEventListener('change', function () {
            const city = this.value;
            const districtSelect = document.getElementById('district');
            districtSelect.innerHTML = '<option value="">請選擇</option>'; // Clear existing options

            if (city in districts) {
                districts[city].forEach(function (district) {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });
            }
        });


        document.querySelector('form').addEventListener('submit', function (event) {
            const nameInput = document.getElementById('name');
            const name = nameInput.value.trim(); // 移除頭尾空格

            // 驗證姓名
            const nameRegex = /^[\u4e00-\u9fa5]{2,5}$/; // 中文字符的正則表達式
            const isNameValid = nameRegex.test(name);

            if (!isNameValid) {
                event.preventDefault(); // 阻止表單提交
                document.querySelector('.error-message').style.display = 'block'; // 顯示錯誤提示
            } else {
                document.querySelector('.error-message').style.display = 'none'; // 隱藏錯誤提示
            }
        });

        document.querySelector('form').addEventListener('submit', function (event) {
            const emailInput = document.getElementById('email');
            const email = emailInput.value.trim(); // 移除頭尾空格

            // 驗證電子郵件地址
            const emailRegex = /^[^\u4e00-\u9fa5@\s]+@[^\s@]+\.[^\s@]+$/; // 包含 "@" 符號且不包含中文字符的正則表達式
            const isEmailValid = emailRegex.test(email);

            if (!isEmailValid) {
                event.preventDefault(); // 阻止表單提交
                document.querySelector('.error-message').style.display = 'block'; // 顯示錯誤提示
            } else {
                document.querySelector('.error-message').style.display = 'none'; // 隱藏錯誤提示
            }
        });

        document.querySelector('form').addEventListener('submit', function (event) {
            const phoneInput = document.getElementById('phone');
            const phoneNumber = phoneInput.value.trim(); // 移除頭尾空格

            // 驗證手機號碼格式
            const phoneRegex = /^09\d{8}$/; // 以 09 開頭的 10 位數字正則表達式
            const isPhoneValid = phoneRegex.test(phoneNumber);

            if (!isPhoneValid) {
                event.preventDefault(); // 阻止表單提交
                document.querySelector('.error-message').style.display = 'block'; // 顯示錯誤提示
            } else {
                document.querySelector('.error-message').style.display = 'none'; // 隱藏錯誤提示
            }
        });

        // 當儲存按鈕點擊時，保存表單資料到本地存儲並顯示提示訊息
        document.querySelector('.save').addEventListener('click', function (event) {
            event.preventDefault();
            saveFormDataLocally();
            alert('資料已成功儲存！');
            location.reload(); // 刷新頁面
        });


        // 當頁面載入時，檢查是否有先前儲存的表單資料，如果有，將其填充到相應的欄位中
        window.addEventListener('load', function () {
            var formData = retrieveFormDataLocally();
            if (formData) {
                populateForm(formData);
            }
        });

        // 當儲存按鈕點擊時，保存表單資料到本地存儲並重新加載頁面
        document.querySelector('.save').addEventListener('click', function (event) {
            event.preventDefault();
            saveFormDataLocally();
            location.reload(); // 刷新頁面
        });

        // 將表單資料保存到本地存儲
        function saveFormDataLocally() {
            var formData = {}; // 創建一個用來存儲表單資料的物件
            // 遍歷所有可見的 input 欄位
            var inputs = document.querySelectorAll('input');
            inputs.forEach(function (input) {
                if (input.type !== 'submit' && input.type !== 'reset') { // 排除提交按鈕和重置按鈕
                    formData[input.id] = input.value; // 將欄位 ID 和值存入 formData 物件中
                }
            });

            // 遍歷所有可見的 select 欄位
            var selects = document.querySelectorAll('select');
            selects.forEach(function (select) {
                formData[select.id] = select.value; // 將欄位 ID 和值存入 formData 物件中
            });

            // 將 formData 物件轉換為 JSON 字串
            var formDataJSON = JSON.stringify(formData);
            // 將 JSON 字串儲存到 localStorage 中
            localStorage.setItem('formData', formDataJSON);
            console.log('表單資料已儲存到本地存儲中');
        }

        // 從本地存儲中檢索之前儲存的表單資料
        function retrieveFormDataLocally() {
            var formDataJSON = localStorage.getItem('formData');
            if (formDataJSON) {
                var formData = JSON.parse(formDataJSON);
                return formData;
            } else {
                console.log('找不到之前儲存的表單資料');
                return null;
            }
        }

        // 將表單資料填充到欄位中
        function populateForm(formData) {
            // 遍歷所有可見的 input 欄位
            var inputs = document.querySelectorAll('input');
            inputs.forEach(function (input) {
                if (input.type !== 'submit' && input.type !== 'reset') { // 排除提交按鈕和重置按鈕
                    input.value = formData[input.id] || ''; // 將存儲的值填充到欄位中，如果值為undefined，則填入空字串
                }
            });

            // 遍歷所有可見的 select 欄位
            var selects = document.querySelectorAll('select');
            selects.forEach(function (select) {
                select.value = formData[select.id] || ''; // 將存儲的值填充到欄位中，如果值為undefined，則填入空字串
            });
        }

        function populateForm(formData) {
            var inputs = document.querySelectorAll('input');
            inputs.forEach(function (input) {
                if (input.type !== 'submit' && input.type !== 'reset') {
                    input.value = formData[input.id] || '';
                }
            });

            var selects = document.querySelectorAll('select');
            selects.forEach(function (select) {
                select.value = formData[select.id] || '';
            });

            // 根據城市加载地區選項
            const citySelect = document.getElementById('city');
            const districtSelect = document.getElementById('district');
            const selectedCity = citySelect.value;

            if (selectedCity && selectedCity in districts) {
                districtSelect.innerHTML = '<option value="">請選擇</option>';
                districts[selectedCity].forEach(function (district) {
                    const option = document.createElement('option');
                    option.value = district;
                    option.textContent = district;
                    districtSelect.appendChild(option);
                });

                // 重新设置已选中的地區
                districtSelect.value = formData['district'] || '';
            }
        }
    </script>

<footer class="footer">
    <div class="footer-left">
        <img src="./images/11.png" alt="Tea Harmony Flower Tea Logo">
    </div>
    <div class="footer-center">
        <div class="footer-section">
            <h3>關於茶韻花茶</h3>
            <ul>
                <li><a href="#">品牌故事</a></li>
                <li><a href="#">從產地到手心</a></li>
                <li><a href="#">退款政策</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>客戶服務</h3>
            <ul>
                <li><a href="#">常見問答</a></li>
                <li><a href="#">聯絡我們</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>茶韻花語知識</h3>
            <ul>
                <li><a href="#">認識花茶</a></li>
            </ul>
        </div>
        <div class="footer-section">
            <h3>聯絡茶韻花語</h3>
            <ul>
                <li><a href="#">聯絡我們</a></li>
            </ul>
        </div>
    </div>
  </footer>
</body>
</body>

</html>